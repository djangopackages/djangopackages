@import "tailwindcss";

@plugin "@tailwindcss/typography";
@plugin "@tailwindcss/aspect-ratio";

@variant htmx-settling (&.htmx-settling, .htmx-settling &);
@variant htmx-request (&.htmx-request, .htmx-request &);
@variant htmx-swapping (&.htmx-swapping, .htmx-swapping &);
@variant htmx-added (&.htmx-added, .htmx-added &);

/* ============================================
   THEME CONFIGURATION
   ============================================ */
@theme {
  /* Color System - Design Tokens */
  --color-background: oklch(0.98 0 0);
  --color-foreground: oklch(0.15 0 0);

  --color-card: oklch(1 0 0);
  --color-card-foreground: oklch(0.15 0 0);

  --color-popover: oklch(1 0 0);
  --color-popover-foreground: oklch(0.15 0 0);

  --color-primary: oklch(0.3176 0.0648 159.21);
  --color-primary-foreground: oklch(1 0 0);

  --color-secondary: oklch(0.96 0 0);
  --color-secondary-foreground: oklch(0.15 0 0);

  --color-muted: oklch(0.94 0 0);
  --color-muted-foreground: oklch(0.45 0 0);

  --color-accent: oklch(0.5 0.15 162);
  --color-accent-foreground: oklch(1 0 0);

  --color-destructive: oklch(0.65 0.2 25);
  --color-destructive-foreground: oklch(1 0 0);

  --color-border: oklch(0.88 0 0);
  --color-input: oklch(0.88 0 0);
  --color-ring: oklch(0.5 0.15 162);

  /* Spacing & Border Radius Scale */
  --radius: 0.625rem;
  --radius-sm: calc(var(--radius) * 0.5);
  --radius-md: var(--radius);
  --radius-lg: calc(var(--radius) * 1.5);
  --radius-xl: calc(var(--radius) * 2);
  --radius-2xl: calc(var(--radius) * 3);
  --radius-full: 9999px;

  /* Custom Breakpoint */
  --breakpoint-xs: 475px;
}

/* ============================================
   BASE LAYER - Global Styles
   ============================================ */
@layer base {
  body {
    @apply font-sans antialiased;
    font-family:
    "Inter",
    -apple-system,
    BlinkMacSystemFont,
    "Segoe UI",
    Roboto,
    sans-serif;
  }
}

/* ============================================
   UTILITIES LAYER - Custom Utility Classes
   ============================================ */
@layer utilities {
  /* Scrollbar Utilities */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;

    &::-webkit-scrollbar {
      display: none;
    }
  }

  /* Text Utilities */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .overflow-wrap-anywhere {
    overflow-wrap: anywhere;
  }

  /* Custom Breakpoint Utilities */
  @media (min-width: 475px) {
    .xs\:inline {
      display: inline;
    }

    .xs\:hidden {
      display: none;
    }
  }

  /* HTMX Utilities */
  .htmx-indicator {
    @apply opacity-0 transition-opacity;
  }

  .htmx-request .htmx-indicator {
    @apply opacity-100;
  }

  .htmx-request.htmx-indicator {
    @apply opacity-100;
  }

  /* Empty State Utilities */
  .empty\:hidden:empty {
    @apply hidden;
  }
}

/* ============================================
   COMPONENTS LAYER - Reusable Components
   ============================================ */
@layer components {
  /* Layout Components */
  .container {
    @apply mx-auto px-4;
    max-width: 1280px;
  }

  /* Card System */
  .card {
    @apply bg-card text-card-foreground rounded-lg border border-border;
    @apply shadow-sm hover:shadow-lg transition-all duration-200;
    @apply cursor-pointer hover:border-primary flex flex-col;
  }

  .card-header {
    @apply p-6;
  }

  .card-content {
    @apply px-6 pb-6;
  }

  /* Badge Components */
  .badge {
    @apply inline-flex items-center rounded-md px-2 py-1;
    @apply text-xs font-medium bg-secondary text-secondary-foreground;
  }

  .category-tag {
    @apply inline-flex items-center rounded-md px-3 py-1;
    @apply text-xs font-medium border border-border bg-muted/20;
    @apply cursor-pointer hover:bg-primary hover:text-primary-foreground;
    @apply transition-colors whitespace-nowrap;
  }

  /* Button System */
  .btn-primary {
    @apply inline-flex items-center justify-center gap-2;
    @apply whitespace-nowrap rounded-md text-sm font-medium;
    @apply transition-all duration-200 h-11 px-8;
    @apply border border-primary bg-primary text-primary-foreground;
    @apply hover:bg-primary/90 hover:border-primary/80 hover:shadow-md;
    @apply active:scale-95;
  }

  .btn-secondary {
    @apply inline-flex items-center justify-center gap-2;
    @apply whitespace-nowrap rounded-md text-sm font-medium;
    @apply transition-all duration-200 h-11 px-8;
    @apply border border-border bg-background text-foreground;
    @apply hover:bg-muted hover:border-muted-foreground/20 hover:shadow-md;
    @apply active:scale-95;
  }

  /* Suggestion Components */
  .suggestion-item {
    @apply flex items-center justify-between p-3 rounded-lg cursor-pointer;
    @apply border border-transparent transition-all duration-150;
    @apply hover:bg-accent hover:text-accent-foreground;

    &.selected {
      @apply bg-accent text-accent-foreground border-accent/20;

      .suggestion-icon {
        @apply bg-accent-foreground/20 text-accent-foreground;
      }

      .suggestion-badge {
        @apply bg-accent-foreground/20 text-accent-foreground;
      }

      .suggestion-description {
        @apply !text-accent-foreground/90;
      }
    }

    &:hover {
      .suggestion-icon {
        @apply bg-accent-foreground/20 text-accent-foreground;
      }

      .suggestion-badge {
        @apply bg-accent-foreground/20 text-accent-foreground;
      }

      .text-muted-foreground {
        @apply !text-accent-foreground/90;
      }
    }
  }

  .suggestion-icon {
    @apply w-6 h-6 rounded-md flex items-center justify-center;
    @apply bg-primary/10 text-primary transition-colors;
  }

  .suggestion-badge {
    @apply text-xs bg-muted/50 transition-colors;
  }

  /* Scroll Button System */
  .scroll-btn-left {
    @apply absolute left-0 top-1/2 -translate-y-1/2 z-10;
    @apply w-8 h-8 flex items-center justify-center rounded-full;
    @apply bg-background/95 backdrop-blur-sm border border-border;
    @apply shadow-md hover:shadow-lg;
    @apply hover:bg-muted hover:border-border;
    @apply transition-all duration-200 hover:scale-110 active:scale-95;

    & i {
      @apply text-muted-foreground transition-colors duration-200;
    }

    &:hover i {
      @apply !text-foreground;
    }
  }

  .scroll-btn-right {
    @apply absolute right-0 top-1/2 -translate-y-1/2 z-10;
    @apply w-8 h-8 flex items-center justify-center rounded-full;
    @apply bg-background/95 backdrop-blur-sm border border-border;
    @apply shadow-md hover:shadow-lg;
    @apply hover:bg-muted hover:border-border;
    @apply transition-all duration-200 hover:scale-110 active:scale-95;

    & i {
      @apply text-muted-foreground transition-colors duration-200;
    }

    &:hover i {
      @apply !text-foreground;
    }
  }

  /* Tooltip Component */
  .tooltip-wrapper {
    @apply relative inline-block;
  }

  .tooltip {
    @apply absolute bottom-full left-1/2 mb-2 w-max
           -translate-x-1/2 rounded
           bg-gray-900 px-2 py-1 text-xs text-white
           opacity-0 pointer-events-none
           transition-opacity duration-200 z-50;
  }

  .tooltip-lg {
    @apply max-w-xs;
  }
}
